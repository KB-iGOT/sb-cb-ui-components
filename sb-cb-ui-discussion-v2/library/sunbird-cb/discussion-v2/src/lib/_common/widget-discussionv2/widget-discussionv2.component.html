<div class="w-full widget-container">
    <div class="flex gap-2">
        <!-- <div class="side-menu-container otherCard">
            <h1>Side menu...</h1>
        </div> -->
        <div class="flex-1 post-container">
            <div class="mb-4" *ngIf="widgetData?.newPostSection?.show">
                <d-v2-new-post [config]="widgetData?.newPostSection" (newComment)="newCommentEvent($event)"
                [type]="widgetData?.newPostSection?.type"></d-v2-new-post>
            </div>

            <ng-container *ngIf="posts && posts.length && !loadingPosts;else noPostsSection;">
                <div class="flex flex-col gap-4">
                    <ng-container *ngFor="let post of posts" >
                        <d-v2-post-card [cardType]="widgetData?.postsList?.cardType"
                        [cardConfig]="widgetData?.postsList" [post]="post" [replyData]="post?.answerPosts"
                        (likeUnlikeData)="likeUnlikeEvent($event)"></d-v2-post-card>
                    </ng-container>
                    <ng-container *ngIf="searchResults?.totalCount > posts.length">
                        <div class="load-more-posts my-4">
                            <button mat-flat-button color="primary" class="w-full underline" (click)="loadMoreComments()">Load
                                More</button>
                        </div>
                    </ng-container>
                </div>
            </ng-container>
            <ng-container *ngIf="loadingPosts || loadingMore">
                <ng-container *ngFor="let post of [1,2,3,4]" >
                    <ng-container [ngTemplateOutlet]="postsSkeletonLoader"></ng-container>
                </ng-container>
            </ng-container>
        </div>
        <div class="other-container">
            <div class="otherCard mb-4">
                <h1>Trending Tags</h1>
            </div>
            <div class="otherCard mb-4">
                <h1>Top Posts</h1>
            </div>
            <div class="otherCard mb-4">
                <h1>Recent Posts</h1>
            </div>
        </div>
    </div>
</div>


<ng-template #postsSkeletonLoader>
    <div class="skeleton-loader mb-4">
        <div class="flex flex-col gap-4 p-4 rounded-md bg-white">

            <div class=" flex gap-4 items-center bg-white">
                <d-v2-widget-skeleton-loader [width]="'48px'" [height]="'48px'"
                    [bindingClass]="'flex rounded-full'"></d-v2-widget-skeleton-loader>
                <div class="flex flex-1 flex-col gap-2">
                    <d-v2-widget-skeleton-loader [width]="'50%'" [height]="'20px'"
                    [bindingClass]="'flex rounded'"></d-v2-widget-skeleton-loader>
                    <d-v2-widget-skeleton-loader [width]="'40%'" [height]="'18px'"
                    [bindingClass]="'flex rounded'"></d-v2-widget-skeleton-loader>
                </div>
                <d-v2-widget-skeleton-loader [width]="'64px'" [height]="'20px'"
                    [bindingClass]="'flex rounded'"></d-v2-widget-skeleton-loader>
            </div>
            <div>
                <d-v2-widget-skeleton-loader class="w-full" [width]="'100%'" [height]="'48px'"
                    [bindingClass]="'flex rounded'"></d-v2-widget-skeleton-loader>
            </div>
            <div>
                <d-v2-widget-skeleton-loader class="w-full" [width]="'100%'" [height]="'360px'"
                    [bindingClass]="'flex rounded'"></d-v2-widget-skeleton-loader>
            </div>
            <div class="flex">
                <d-v2-widget-skeleton-loader class=" mr-4" [width]="'64px'" [height]="'48px'"
                    [bindingClass]="'flex rounded-full'"></d-v2-widget-skeleton-loader>
                <d-v2-widget-skeleton-loader class=" mr-4" [width]="'64px'" [height]="'48px'"
                [bindingClass]="'flex rounded-full'"></d-v2-widget-skeleton-loader>
            </div>
        </div>
    </div>
</ng-template>

<ng-template #noPostsSection>
    <ng-container *ngIf="!loadingPosts && !loadingMore">
        <div class="flex flex-1 items-center justify-center ">
            {{widgetData?.postsList?.noPostsSection?.text}}
        </div>
    </ng-container>
</ng-template>