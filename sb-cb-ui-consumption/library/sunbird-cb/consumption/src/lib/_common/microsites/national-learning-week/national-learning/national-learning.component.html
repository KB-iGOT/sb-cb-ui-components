<div class="container-fluid white-background nlm-micro-sites" id="nlm-micro-sites">
    <div class="flex flex-col flex-1">
        <ng-container *ngIf="sectionList?.length">
            <ng-container *ngFor="let section of sectionList">
                <ng-container *ngIf="section?.enabled">
                    <section id="{{section?.key}}" class="w-full grid grid-cols-12 gap-4" [ngClass]="{'container': section.wrapperClass}">
                        <ng-container *ngFor="let column of section.column">
                            <div id="{{column?.key}}" class="col-span-{{column.colspan || 12}} ">
                                <ng-container *ngIf="column?.enabled" [ngSwitch]="column?.key">
                                    <ng-container *ngSwitchCase="'topSection'" [ngTemplateOutlet]="topSection"
                                        [ngTemplateOutletContext]="{data: column?.data}"></ng-container>
                                    <ng-container *ngSwitchCase="'keyHighlightSection'" [ngTemplateOutlet]="keyHighlightSection"
                                        [ngTemplateOutletContext]="{data: column?.data}"></ng-container>
                                    <ng-container *ngSwitchCase="'eventsContent'" [ngTemplateOutlet]="eventsContent"
                                        [ngTemplateOutletContext]="{data: column?.data}"></ng-container>
                                    <ng-container *ngSwitchCase="'mainContent'" [ngTemplateOutlet]="mainContent"
                                        [ngTemplateOutletContext]="{data: column?.data}"></ng-container>
                                    <ng-container *ngSwitchCase="'wowContent'" [ngTemplateOutlet]="wowContent"
                                        [ngTemplateOutletContext]="{data: {contentStrip: column?.data, sectionKey: section.key}}"></ng-container>
                                </ng-container>
                            </div>
                        </ng-container>
                    </section>
                </ng-container>
            </ng-container>
        </ng-container>
    </div>
</div>

<ng-template #topSection let-data="data">
    <!-- top section desktop layout -->
    <div class="w-full topSection">
        <div *ngIf="data.sliderData && data.sliderData.sliders">
            <sb-uic-sliders [widgetData]="data.sliderData.sliders" [styleData]="data.sliderData.styleData" ></sb-uic-sliders>
        </div>
    </div>
</ng-template>

<ng-template #keyHighlightSection let-data="data">
    <div class="col-span-12">
        <div class="flex items-center justify-center">
            <div class="container">

                <div class="hidden md:block">
                    <sb-uic-key-highlights (emptyResponse)="hideKeyHightlight($event, data)"  [formData]="data" [providerId]="providerId" [mode]="'desktop'"></sb-uic-key-highlights>
                </div>
                <div class="block md:hidden">
                    <sb-uic-key-highlights (emptyResponse)="hideKeyHightlight($event, data)"  [formData]="data" [providerId]="providerId" [mode]="'mobile'"></sb-uic-key-highlights>
                </div>
            </div>
        </div>
    </div>
</ng-template>

<ng-template #mainContent let-data="data">
    <div class="flex items-center justify-center">
        <div class="container">
            <div class="grid grid-cols-12 gap-4 padding-top-m">
                <div class="md:col-span-{{data?.content?.colspan}}">
                    {{data?.content?.data?.title}}
                </div>
                <div class="md:col-span-{{data?.mdoLeaderboard?.colspan}}">
                    <sb-uic-mdo-leaderboard [object]="data"></sb-uic-mdo-leaderboard>
                </div>
            </div>
        </div>
    </div>
</ng-template>

<ng-template #eventsContent let-data="data">
    <div class="col-span-12 padding-top-m">
        <div class="flex items-center justify-center">
            <div class="container">
                <sb-uic-events [object]="data"></sb-uic-events>
            </div>
        </div>
    </div>
</ng-template>

<ng-template #wowContent let-data="data">
    <ng-container *ngIf="!data?.contentStrip?.hideSection">
        <div class="flex justify-center relative">
            <img class="absolute {{data?.contentStrip?.sectionImagePosition}}" src="{{data?.contentStrip?.sectionImage}}" alt="">
            <div class="container wow-contents">
                <div class="w-full">
                    <sb-uic-content-strip-with-tabs
                        [emitViewAll]="true"
                        (viewAllResponse)="showAllContent($event,data)"
                        (emptyResponse)="hideContentStrip($event, data)"
                        (telemtryResponse)="raiseTelemetryInteratEvent($event)"
                        [providerId]="providerId"
                        [widgetData]="data?.contentStrip">
                    </sb-uic-content-strip-with-tabs>
                </div>
            </div>
        </div>
    </ng-container>
</ng-template>


